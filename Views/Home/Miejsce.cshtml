@model BankZdjecOlsztyn.ViewsModels.MiejsceVM
@using Microsoft.AspNetCore.Identity;

@inject SignInManager<IdentityUser>  SingInManager

<script src="https://cdn.polyfill.io/v2/polyfill.min.js?features=fetch,requestAnimationFrame,Element.prototype.classList,URL"></script>



<div class="col-12">

    @*<div class="container">
            <h2>Carousel Example</h2>
            <div id="myCarousel" class="carousel slide" data-ride="carousel">
                 Wrapper for slides
                <div class="carousel-inner">




                    @{ for (int i = 0; i < Model.Miejsca.ZdieciaList.Count; i++)
                        {

                            var photoPath = "~/images/" + Model.Miejsca.ZdieciaList[i].Url;
                            @if (i == 0)
                            {
                                <div class="item active">
                                    <img src="@photoPath" asp-append-version="true"   class=" min-vh-100 img-fluid m-auto">


                                </div>
                            }
                            else
                            {
                                <div class="item">
                                    <img src="@photoPath" asp-append-version="true"  class=" min-vh-100 img-fluid m-auto">


                                </div>
                            }

                        }}
                </div>

                 Left and right controls
                <a class="left carousel-control" href="#myCarousel" data-slide="prev">
                    <span class="glyphicon glyphicon-chevron-left"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="right carousel-control" href="#myCarousel" data-slide="next">
                    <span class="glyphicon glyphicon-chevron-right"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </div>*@
    <div class="w3-content w3-display-container">
        @{ for (int i = 0; i < Model.Miejsca.ZdieciaList.Count; i++)
            {

                var photoPath = "~/images/" + Model.Miejsca.ZdieciaList[i].Url;
                @if (i == 0)
                {
                    <div class="item active">
                        <img src="@photoPath" asp-append-version="true" class=" mySlides min-vh-100 img-fluid m-auto">


                    </div>
                }
                else
                {
                    <div class="item">
                        <img src="@photoPath" asp-append-version="true" class="mySlides  min-vh-100 img-fluid m-auto">


                    </div>
                }

            }}
      

        <button class="w3-button w3-black w3-display-left" onclick="plusDivs(-1)">&#10094;</button>
        <button class="w3-button w3-black w3-display-right" onclick="plusDivs(1)">&#10095;</button>
    </div>

    <script>
        var slideIndex = 1;
        showDivs(slideIndex);

        function plusDivs(n) {
            showDivs(slideIndex += n);
        }

        function showDivs(n) {
            var i;
            var x = document.getElementsByClassName("mySlides");
            if (n > x.length) { slideIndex = 1 }
            if (n < 1) { slideIndex = x.length }
            for (i = 0; i < x.length; i++) {
                x[i].style.display = "none";
            }
            x[slideIndex - 1].style.display = "block";
        }
    </script>

    @*@{ foreach (var item in Model.Miejsca.ZdieciaList)
        {
            var photoPath = "~/images/" + item.Url;
            <img src="@photoPath" asp-append-version="true" class="img-fluid" />
        }}*@

    <h3>@Model.Miejsca.MiejsceId</h3>
    <h3>@Model.Miejsca.Nazwa </h3>
    <h4>@Model.Miejsca.Opis</h4>
    @foreach (var item in Model.Miejsca.MiejsceTag)
    {
        <h5 class="text-primary">@item.Tag.Nazwa</h5>
    }
    @if (SingInManager.IsSignedIn(User))
    {
        <form enctype="multipart/form-data" id="sever" asp-action="AddZdjecie" asp-controller="AddMiejsce" method="post" class="form-horizontal " role="form">
            <div class="form-group">
                <div class="col-md-5 " style="display:none">
                    <input asp-for="id2" value="@Model.Miejsca.MiejsceId" />
                </div>
                <div class="form-group">
                    <label asp-for="ZdjecieAdd" class="col-sm-2 col-form-label">Zdjęcie</label>
                    <div class="col-sm-10">
                        <div class="custom-file">
                            <input asp-for="ZdjecieAdd" class="form-control custom-file-input" />
                            <label class=" custom-file-label">Wybierz zdjęcie...</label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <input type="submit" value="Dodaj" class="btn btn-outline-danger" />
            </div>
        </form>
    }


    <form asp-controller="DelMiejsce" asp-action="Delete" method="post" class="form-horizontal " role="form">
        <div class="col-md-5 " style="display:none">
            <input asp-for="id2" value="@Model.Miejsca.MiejsceId" />
        </div>
        <div class="form-group">
            <input type="submit" value="Delete" class="btn btn-outline-danger" />
        </div>
    </form>

</div>
@section Scripts {
    <script>
        $(document).ready(function () {
            $('.custom-file-input').on("change", function () {
                var fileName = $(this).val().split("\\").pop();
                $(this).next('.custom-file-label').html(fileName);
            });
        });
    </script>
}